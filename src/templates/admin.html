{% extends "base.html" %}
{% block content %}

<h1>User: {{ user.username }}, Role: {{user.role}}</h1>

{% with messages = get_flashed_messages() %}
  {% if messages %}
  <h2>Messages</h2>
  <ul>
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
  </ul>
  {% endif %}
{% endwith %}

<h1>PR</h1>

{% for pr in pr_list %}
  <p> 
    ({{ pr.desc}}), {{ pr.file_name }}, id={{ pr.id }}, 
    priority={{ pr.priority }}, {{ pr.start_date }} - {{ pr.end_date }},
    <a href="/admin/delete?id={{pr.id}}">Delete</a> 
  </p>
{% endfor %}

<h1>Upload PR</h1>
<form method="post" enctype="multipart/form-data">
  {{ form.hidden_tag() }}
  <p>
    {{ form.file.title }}<br>
    {{ form.file }}
    {% for error in form.file.errors %}
    <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
  </p>
  <p>
    {{ form.desc.title }} <br>
    {{ form.desc }}
    {% for error in form.desc.errors %}
    <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
  </p>
  <p>
    {{ form.start_date.label }} <br>
    {{ form.start_date }} <br>
    {% for error in form.start_date.errors %}
    <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
    {{ form.end_date.label }} <br>
    {{ form.end_date}}
    {% for error in form.end_date.errors %}
    <span style="color: red;">[{{ error }}]</span>
    {% endfor %}
  </p>
  <p>
    {{ form.priority.label }} {{ form.priority }} <br>
    (Only this PR will be shown until 5:00 tomorrow)
  </p>
  <p>
    {{ form.submit }}
  </p>
</form>

<a href="/admin/users">Users</a>

<a href="/logout">Logout</a>

{% endblock %}